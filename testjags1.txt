
model{

  # likelihood
  for(i in 1:ndata){
    titer[i] ~ dgamma(shape,rate[i])
    expected[i] <- param.a[grade[i]]*days[i]*exp(-1*param.b[grade[i]]*days[i])
    rate[i] <- shape/expected[i]
  }

  # priors
  for(g in 1:ngrades){
    param.a[g] ~ dgamma(0.001,0.001)
    param.b[g] ~ dgamma(0.001,0.001)
  }
  shape ~ dgamma(0.001,0.001)

}
