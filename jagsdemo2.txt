
  model{
     # likelihood

     for(i in 1:ndata){
       titer[i] ~ dgamma(shape[grade[i]],rate[i])   # data node
       expected[i] <- param.a[grade[i]]*days[i]*exp(-1*param.b[grade[i]]*days[i])   # ricker deterministic function
       rate[i] <- shape[grade[i]]/expected[i]
     }

     # priors

     for(g in 1:ngrades){
       param.a[g] ~ dgamma(0.001,0.001)
       param.b[g] ~ dgamma(0.001,0.001)
       shape[g] ~ dgamma(0.001,0.001)
     }
  }

  